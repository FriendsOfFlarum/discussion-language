module.exports=function(n){var t={};function e(o){if(t[o])return t[o].exports;var a=t[o]={i:o,l:!1,exports:{}};return n[o].call(a.exports,a,a.exports,e),a.l=!0,a.exports}return e.m=n,e.c=t,e.d=function(n,t,o){e.o(n,t)||Object.defineProperty(n,t,{enumerable:!0,get:o})},e.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},e.t=function(n,t){if(1&t&&(n=e(n)),8&t)return n;if(4&t&&"object"==typeof n&&n&&n.__esModule)return n;var o=Object.create(null);if(e.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:n}),2&t&&"string"!=typeof n)for(var a in n)e.d(o,a,function(t){return n[t]}.bind(null,a));return o},e.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(t,"a",t),t},e.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},e.p="",e(e.s=21)}([function(n,t){n.exports=flarum.core.compat.extend},function(n,t){n.exports=flarum.core.compat["components/Button"]},function(n,t){n.exports=flarum.core.compat.Model},function(n,t,e){"use strict";function o(n,t){n.prototype=Object.create(t.prototype),n.prototype.constructor=n,n.__proto__=t}e.d(t,"a",(function(){return o}))},function(n,t){n.exports=flarum.core.compat["models/Forum"]},function(n,t){n.exports=flarum.core.compat["components/Modal"]},function(n,t,e){"use strict";function o(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}e.d(t,"a",(function(){return u}));var a=e(3);function i(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}var r=e(2),s=e.n(r),u=function(n){function t(){for(var t,e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];return i(o(t=n.call.apply(n,[this].concat(a))||this),"code",s.a.attribute("code")),t}return Object(a.a)(t,n),t.prototype.apiEndpoint=function(){return"/fof/discussion-language"+(this.exists?"/"+this.data.id:"")},t}(s.a)},,,,function(n,t){n.exports=flarum.core.compat["helpers/icon"]},,,,,,,,function(n,t){n.exports=flarum.core.compat["components/PermissionGrid"]},function(n,t){n.exports=flarum.core.compat["components/SettingDropdown"]},,function(n,t,e){"use strict";e.r(t);var o=e(0),a=e(4),i=e.n(a),r=e(18),s=e.n(r),u=e(19),c=e.n(u),l=e(3),d=e(5),p=e.n(d),f=e(1),g=e.n(f),h=e(10),b=e.n(h),y=function(n){function t(){return n.apply(this,arguments)||this}Object(l.a)(t,n);var e=t.prototype;return e.init=function(){n.prototype.init.call(this),this.updating={},this.deleting={},this.codes={},this.newLocale=m.prop("")},e.className=function(){return"FofDiscussionLanguagesSettingsModal Modal--medium"},e.title=function(){return app.translator.trans("fof-discussion-language.admin.settings.title")},e.content=function(){var n=this;return[m("div",{className:"Modal-body"},m("div",{className:"Form-group flex"},m("input",{className:"FormControl",bidi:this.newLocale,onkeydown:this.onkeydown.bind(this)}),g.a.component({className:"Button Button--primary",children:b()(this.adding?"fas fa-spinner fa-spin":"fas fa-plus"),onclick:this.add.bind(this),disabled:!this.newLocale()||this.adding})),m("div",{className:"Form-group"},app.store.all("discussion-languages").map((function(t){var e=t.id(),o=n.updating[e],a=n.deleting[e],i=n.codes[e];return m("div",{className:"flex"},m("input",{className:"FormControl",value:i||""===i?i:t.code(),placeholder:t.code(),oninput:m.withAttr("value",(function(t){return n.codes[e]=t})),disabled:o||a}),g.a.component({className:"Button Button--danger",children:b()(a?"fas fa-spinner fa-spin":"fas fa-times"),disabled:a,onclick:n.remove.bind(n,t)}))}))),m("div",{className:"Form-group"},m(g.a,{type:"submit",className:"Button Button--primary",loading:this.loading,disabled:!this.changed(),onclick:this.save.bind(this)},app.translator.trans("core.admin.settings.submit_button"))))]},e.onkeydown=function(n){"Enter"===n.key&&(this.add(),n.preventDefault())},e.add=function(){var n=this;if(!this.adding&&this.newLocale()){this.adding=!0;var t=this.newLocale();app.store.createRecord("discussion-languages").save({code:t}).then((function(){n.newLocale(""),n.adding=!1,m.redraw()})).catch((function(){return n.adding=!1}))}},e.save=function(){var n=this;this.loading=!0,Promise.all(this.dirty().map((function(t){return n.updating[t.id()]=!0,t.save({code:n.codes[t.id()]}).then((function(){}),(function(){})).then((function(){n.updating[t.id()]=!1}))}))).then(this.hide.bind(this),this.loaded.bind(this))},e.remove=function(n){var t=this;this.deleting[n.id()]=!0,n.delete().then((function(){}),(function(){})).then((function(){delete t.deleting[n.id()],m.redraw()}))},e.dirty=function(){var n=this;return app.store.all("discussion-languages").filter((function(t){return n.codes[t.id()]&&n.codes[t.id()]!==t.code()}))},e.changed=function(){return this.dirty().length},t}(p.a),v=e(6);app.initializers.add("fof/discussion-language",(function(){app.store.models["discussion-languages"]=v.a,i.a.prototype.discussionLanguages=i.a.hasMany("discussionLanguages"),app.extensionSettings["fof-discussion-language"]=function(){return app.modal.show(new y)},Object(o.extend)(s.a.prototype,"startItems",(function(n){n.add("allowLanguageChange",{icon:"fas fa-globe",label:app.translator.trans("fof-discussion-language.admin.permissions.allow_change_language_label"),setting:function(){var n=parseInt(app.data.settings["fof-discussion-language.allow_tag_change"],10);return c.a.component({defaultLabel:n?app.translator.transChoice("core.admin.permissions_controls.allow_some_minutes_button",n,{count:n}):app.translator.trans("core.admin.permissions_controls.allow_indefinitely_button"),key:"fof-discussion-language.allow_language_change",options:[{value:"-1",label:app.translator.trans("core.admin.permissions_controls.allow_indefinitely_button")},{value:"10",label:app.translator.trans("core.admin.permissions_controls.allow_ten_minutes_button")},{value:"reply",label:app.translator.trans("core.admin.permissions_controls.allow_until_reply_button")}]})}},90)}))}))}]);
//# sourceMappingURL=admin.js.map