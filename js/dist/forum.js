module.exports=function(n){var e={};function t(o){if(e[o])return e[o].exports;var a=e[o]={i:o,l:!1,exports:{}};return n[o].call(a.exports,a,a.exports,t),a.l=!0,a.exports}return t.m=n,t.c=e,t.d=function(n,e,o){t.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:o})},t.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,e){if(1&e&&(n=t(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var a in n)t.d(o,a,function(e){return n[e]}.bind(null,a));return o},t.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(e,"a",e),e},t.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},t.p="",t(t.s=20)}([function(n,e){n.exports=flarum.core.compat.extend},function(n,e){n.exports=flarum.core.compat["components/Button"]},function(n,e){n.exports=flarum.core.compat.Model},function(n,e,t){"use strict";function o(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}t.d(e,"a",(function(){return o}))},function(n,e){n.exports=flarum.core.compat["models/Forum"]},function(n,e){n.exports=flarum.core.compat["components/Modal"]},function(n,e,t){"use strict";function o(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}t.d(e,"a",(function(){return u}));var a=t(3);function s(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var r=t(2),i=t.n(r),u=function(n){function e(){for(var e,t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return s(o(e=n.call.apply(n,[this].concat(a))||this),"code",i.a.attribute("code")),e}return Object(a.a)(e,n),e.prototype.apiEndpoint=function(){return"/fof/discussion-language"+(this.exists?"/"+this.data.id:"")},e}(i.a)},function(n,e){n.exports=flarum.core.compat["models/Discussion"]},function(n,e){n.exports=flarum.core.compat["components/DiscussionComposer"]},function(n,e){n.exports=flarum.core.compat["components/IndexPage"]},,function(n,e){n.exports=flarum.core.compat["utils/DiscussionControls"]},function(n,e){n.exports=flarum.core.compat["components/DiscussionPage"]},function(n,e){n.exports=flarum.core.compat["components/Select"]},function(n,e){n.exports=flarum.core.compat["components/DiscussionHero"]},function(n,e){n.exports=flarum.core.compat["components/DiscussionList"]},function(n,e){n.exports=flarum.core.compat["components/DiscussionListItem"]},function(n,e){n.exports=flarum.core.compat["components/Dropdown"]},,,function(n,e,t){"use strict";t.r(e);var o=t(2),a=t.n(o),s=t(4),r=t.n(s),i=t(7),u=t.n(i),c=t(6),l=t(0),p=t(11),d=t.n(p),f=t(1),g=t.n(f),h=t(3),b=t(5),y=t.n(b),v=t(12),x=t.n(v),O=function(n){function e(){return n.apply(this,arguments)||this}Object(h.a)(e,n);var t=e.prototype;return t.init=function(){n.prototype.init.call(this),this.languages=app.store.all("discussion-languages"),this.selected=this.props.discussion&&this.props.discussion.language()},t.className=function(){return"FoFLanguageDiscussionModal"},t.title=function(){return this.props.discussion?app.translator.trans("fof-discussion-language.forum.change_language.edit_title",{title:m("em",null,this.props.discussion.title())}):app.translator.trans("fof-discussion-language.forum.change_language.title")},t.content=function(){var n=this;return[m("div",{className:"Modal-body"},m("div",{className:"Form-group"},this.languages.map((function(e){return m(g.a,{onclick:n.select.bind(n,e),className:"Button Button--block "+(n.selected===e?"active":"")},m("code",null,(e.code()||"").toUpperCase()))}))),m("div",{className:"App-primaryControl"},g.a.component({type:"submit",className:"Button Button--primary",disabled:!this.selected||this.selected===this.props.discussion.language(),loading:this.loading,icon:"fas fa-check",children:app.translator.trans("fof-discussion-language.forum.change_language.submit_button")})))]},t.select=function(n){this.selected=n,m.redraw()},t.onsubmit=function(n){var e=this;n.preventDefault(),this.loading=!0;var t=this.props.discussion,o=this.selected;t.save({relationships:{language:o}}).then((function(){return app.current instanceof x.a&&app.current.stream.update(),e.hide()})).catch(this.loaded.bind(this))},e}(y.a),j=t(8),_=t.n(j),w=t(13),C=t.n(w),D=function(n,e){return n.code().toLowerCase()>e.code().toLowerCase()},L=t(9),P=t.n(L),M=t(14),N=t.n(M),k=t(15),B=t.n(k),S=t(16),I=t.n(S),F=t(17),q=t.n(F),A=function(n){var e=this.props.discussion.language();e&&n.add("discussion-language",m("span",null,m("i",{className:"fas fa-globe"}),m("code",null,e.code())),5)};app.initializers.add("fof/discussion-language",(function(){app.store.models["discussion-languages"]=c.a,r.a.prototype.discussionLanguages=a.a.hasMany("discussionLanguages"),u.a.prototype.language=a.a.hasOne("language"),u.a.prototype.canChangeLanguage=a.a.attribute("canChangeLanguage"),Object(l.extend)(d.a,"moderationControls",(function(n,e){e.canChangeLanguage()&&n.add("language",g.a.component({children:app.translator.trans("fof-discussion-language.forum.discussion_controls.change_language_button"),icon:"fas fa-globe",onclick:function(){return app.modal.show(new O({discussion:e}))}}))})),Object(l.extend)(_.a.prototype,"headerItems",(function(n){var e=this,t=app.store.all("discussion-languages").sort(D);n.add("language",C.a.component({value:this.language&&this.language.code()||t[0].code(),options:t.reduce((function(n,e){var t=e.code();return n[t]=t,n}),{}),onchange:function(n){return e.language=app.store.getBy("discussion-languages","code",n)}}),20)})),Object(l.extend)(_.a.prototype,"data",(function(n){n.relationships=n.relationships||{},n.relationships.language=this.language||app.store.all("discussion-languages").sort(D)[0]})),Object(l.extend)(I.a.prototype,"infoItems",A),Object(l.extend)(N.a.prototype,"items",A),Object(l.extend)(B.a.prototype,"requestParams",(function(n){n.include.push("language"),this.props.params.language&&(n.filter.q=(n.filter.q||"")+" language:"+this.props.params.language)})),Object(l.extend)(P.a.prototype,"stickyParams",(function(n){return n.language=m.route.param("language")})),Object(l.extend)(P.a.prototype,"viewItems",(function(n){var e=this,t=app.store.all("discussion-languages").reduce((function(n,e){return n[e.code()]=e.code(),n}),{any:app.translator.trans("fof-discussion-language.forum.index_language.any")});n.add("language",q.a.component({buttonClassName:"Button",label:t[this.params().language]||t.any,children:Object.keys(t).map((function(n){var o=e.params().language||"any",a=n===o;return g.a.component({children:t[n],icon:!a||"fas fa-check",onclick:function(){var t=e.params();"any"===n?delete t.language:t.language=n,m.route(app.route(e.props.routeName,t))},active:a})}))}))}))}))}]);
//# sourceMappingURL=forum.js.map