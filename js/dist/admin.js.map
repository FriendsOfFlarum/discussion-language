{"version":3,"sources":["webpack://@fof/discussion-language/webpack/bootstrap","webpack://@fof/discussion-language/external \"flarum.core.compat['common/Model']\"","webpack://@fof/discussion-language/external \"flarum.core.compat['common/extend']\"","webpack://@fof/discussion-language/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@fof/discussion-language/./src/common/utils/flag.js","webpack://@fof/discussion-language/external \"flarum.core.compat['common/components/Button']\"","webpack://@fof/discussion-language/./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","webpack://@fof/discussion-language/./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack://@fof/discussion-language/./src/common/models/Language.js","webpack://@fof/discussion-language/external \"flarum.core.compat['common/helpers/icon']\"","webpack://@fof/discussion-language/external \"flarum.core.compat['common/models/Forum']\"","webpack://@fof/discussion-language/external \"flarum.core.compat['common/components/Switch']\"","webpack://@fof/discussion-language/./src/common/models/index.js","webpack://@fof/discussion-language/./src/common/utils/index.js","webpack://@fof/discussion-language/./node_modules/twemoji-basename/index.js","webpack://@fof/discussion-language/external \"flarum.core.compat['common/components/Select']\"","webpack://@fof/discussion-language/external \"flarum.core.compat['common/utils/Stream']\"","webpack://@fof/discussion-language/external \"flarum.core.compat['admin/components/PermissionGrid']\"","webpack://@fof/discussion-language/external \"flarum.core.compat['admin/components/SettingDropdown']\"","webpack://@fof/discussion-language/external \"flarum.core.compat['admin/components/ExtensionPage']\"","webpack://@fof/discussion-language/external \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://@fof/discussion-language/external \"flarum.core.compat['admin/utils/saveSettings']\"","webpack://@fof/discussion-language/external \"flarum.core.compat['admin/app']\"","webpack://@fof/discussion-language/./src/admin/utils/locales.js","webpack://@fof/discussion-language/./src/admin/utils/countries.js","webpack://@fof/discussion-language/./src/admin/components/LanguagesSettingsPage.js","webpack://@fof/discussion-language/./src/admin/components/index.js","webpack://@fof/discussion-language/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://@fof/discussion-language/./src/admin/utils/index.js","webpack://@fof/discussion-language/./src/admin/index.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","installedModules","0","__webpack_require__","exports","module","l","e","promises","installedChunkData","promise","Promise","resolve","reject","onScriptComplete","script","document","createElement","charset","timeout","nc","setAttribute","src","p","jsonpScriptSrc","error","Error","event","onerror","onload","clearTimeout","chunk","errorType","type","realSrc","target","message","name","request","undefined","setTimeout","head","appendChild","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","err","console","jsonpArray","window","oldJsonpFunction","slice","s","flarum","core","compat","_inheritsLoose","subClass","superClass","constructor","__proto__","language","emoji","alt","country","className","draggable","loading","basename","icon","_assertThisInitialized","self","ReferenceError","_defineProperty","obj","configurable","writable","Language","Model","attribute","apiEndpoint","this","exists","id","models","utils","flag","str","charCodeAt","toString","join","ISO6391","countries","native","sort","a","b","reduce","getCode","load","__webpack_public_path__","app","forum","then","pkg","values","map","indexOf","filter","keys","getEmoji","code","LanguagesSettingsPage","oninit","vnode","updating","deleting","codes","newLocale","Stream","newCountry","nativeKey","settings","showFlagsKey","showFlags","composerLocaleDefaultKey","composerLocaleDefault","localeSortKey","localeSort","showAnyLangOptKey","showAnyLangOpt","loadingData","oncreate","refresh","redraw","content","locales","getLocales","countryData","getCountries","Switch","component","state","onchange","val","sync","translator","trans","Select","options","Button","onclick","add","disabled","adding","store","remove","isChanged","save","onkeydown","preventDefault","createRecord","dirty","saveSettings","onsaved","Number","composerLocale","locale","anyOpt","ExtensionPage","components","_extends","assign","arguments","source","apply","getCountry","getName","commonUtils","initializers","Forum","discussionLanguages","hasMany","extensionData","registerPage","extend","PermissionGrid","items","label","setting","minutes","parseInt","SettingDropdown","defaultLabel","count"],"mappings":"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","file":"admin.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t};\n\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t0: 0\n \t};\n\n\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"vendors~\" + ({\"1\":\"countries\",\"3\":\"iso-639-1\"}[chunkId]||chunkId) + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonpmodule_exports\"] = window[\"webpackJsonpmodule_exports\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 35);\n","module.exports = flarum.core.compat['common/Model'];","module.exports = flarum.core.compat['common/extend'];","export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}","import basename from 'twemoji-basename';\nimport icon from 'flarum/common/helpers/icon';\n\nexport default (language) => {\n    if (!language) return;\n\n    const emoji = language.emoji ? language.emoji() : language;\n\n    return emoji ? (\n        <img\n            alt={(language.country && language.country()) || ''}\n            className=\"emoji\"\n            draggable=\"false\"\n            loading=\"lazy\"\n            src={`//cdn.jsdelivr.net/gh/twitter/twemoji@13/assets/72x72/${basename(emoji)}.png`}\n        />\n    ) : (\n        icon('fas fa-globe')\n    );\n};\n","module.exports = flarum.core.compat['common/components/Button'];","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import Model from 'flarum/common/Model';\n\nexport default class Language extends Model {\n    code = Model.attribute('code');\n    country = Model.attribute('country');\n\n    name = Model.attribute('name');\n    emoji = Model.attribute('emoji');\n\n    apiEndpoint() {\n        return `/fof/discussion-language${this.exists ? `/${this.data.id}` : ''}`;\n    }\n}\n","module.exports = flarum.core.compat['common/helpers/icon'];","module.exports = flarum.core.compat['common/models/Forum'];","module.exports = flarum.core.compat['common/components/Switch'];","import Language from './Language';\n\nexport const models = {\n    Language,\n};\n","import flag from './flag';\n\nexport const utils = {\n    flag,\n};\n","/*! Copyright Twitter Inc. and other contributors. Licensed under MIT */\n/* https://github.com/twitter/twemoji/blob/gh-pages/LICENSE */\n\nmodule.exports = function (str) {\n  var r = []\n  var c = 0\n  var p = 0\n  var i = 0\n  var l = str.length\n\n  while (i < l) {\n    c = str.charCodeAt(i++)\n    if (p) {\n      r.push((0x10000 + ((p - 0xD800) << 10) + (c - 0xDC00)).toString(16))\n      p = 0\n    } else if (0xD800 <= c && c <= 0xDBFF) {\n      p = c\n    } else {\n      r.push(c.toString(16))\n    }\n  }\n\n  return r.join('-')\n}\n","module.exports = flarum.core.compat['common/components/Select'];","module.exports = flarum.core.compat['common/utils/Stream'];","module.exports = flarum.core.compat['admin/components/PermissionGrid'];","module.exports = flarum.core.compat['admin/components/SettingDropdown'];","module.exports = flarum.core.compat['admin/components/ExtensionPage'];","module.exports = flarum.core.compat['common/components/LoadingIndicator'];","module.exports = flarum.core.compat['admin/utils/saveSettings'];","module.exports = flarum.core.compat['admin/app'];","// import ISO6391 from 'iso-639-1';\n\nimport app from 'flarum/admin/app';\n\nlet ISO6391;\n\nexport const load = () => {\n    __webpack_public_path__ = `${app.forum.attribute('baseUrl')}/assets/extensions/fof-discussion-language/`;\n\n    return import(/* webpackChunkName: \"iso-639-1\" */ 'iso-639-1').then((pkg) => (ISO6391 = pkg.default));\n};\n\nexport default (native) =>\n    ISO6391?.[native ? 'getAllNativeNames' : 'getAllNames']?.()\n        ?.sort((a, b) => a > b)\n        ?.reduce((o, name) => {\n            o[ISO6391.getCode(name)] = name;\n\n            return o;\n        }, {});\n\nexport const getName = (code, native) => ISO6391?.[native ? 'getNativeName' : 'getName']?.(code);\n","let countries;\n\nexport const load = () => {\n    __webpack_public_path__ = `${app.forum.attribute('baseUrl')}/assets/extensions/fof-discussion-language/`;\n\n    return import(/* webpackChunkName: \"countries\" */ '../../common/generated/countries.json').then((pkg) => (countries = pkg.default));\n};\n\nexport default (native) => {\n    if (!countries) return {};\n\n    const data = Object.values(countries);\n    const key = native ? 'native' : 'name';\n\n    return data\n        .map((c) => c[key])\n        .sort((a, b) => a > b)\n        .reduce((o, name) => {\n            const i = data.indexOf(data.filter((c) => c[key] === name)[0]);\n\n            o[Object.keys(countries)[i]] = name;\n\n            return o;\n        }, {});\n};\n\nexport const getEmoji = (code) => countries?.[code]?.emoji;\n","import ExtensionPage from 'flarum/admin/components/ExtensionPage';\nimport Button from 'flarum/common/components/Button';\nimport Select from 'flarum/common/components/Select';\nimport Switch from 'flarum/common/components/Switch';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport icon from 'flarum/common/helpers/icon';\nimport saveSettings from 'flarum/admin/utils/saveSettings';\nimport Stream from 'flarum/common/utils/Stream';\nimport getLocales, * as locales from '../utils/locales';\nimport getCountries, * as countries from '../utils/countries';\nimport flag from '../../common/utils/flag';\n\nexport default class LanguagesSettingsPage extends ExtensionPage {\n    oninit(vnode) {\n        super.oninit(vnode);\n\n        this.updating = {};\n        this.deleting = {};\n\n        this.codes = {};\n        this.countries = {};\n\n        this.newLocale = Stream('');\n        this.newCountry = Stream('');\n\n        this.nativeKey = 'fof-discussion-language.native';\n        this.native = app.data.settings[this.nativeKey];\n\n        this.showFlagsKey = 'fof-discussion-language.showFlags';\n        this.showFlags = app.data.settings[this.showFlagsKey];\n\n        this.composerLocaleDefaultKey = 'fof-discussion-language.composerLocaleDefault';\n        this.composerLocaleDefault = app.data.settings[this.composerLocaleDefaultKey] || 0;\n\n        this.localeSortKey = 'fof-discussion-language.filter_language_on_http_request';\n        this.localeSort = app.data.settings[this.localeSortKey];\n\n        this.showAnyLangOptKey = 'fof-discussion-language.showAnyLangOpt';\n        this.showAnyLangOpt = app.data.settings[this.showAnyLangOptKey];\n\n        this.loadingData = true;\n    }\n\n    oncreate(vnode) {\n        super.oncreate(vnode);\n\n        this.refresh();\n    }\n\n    refresh() {\n        this.loadingData = true;\n\n        return Promise.all([locales.load(), countries.load()]).then(() => {\n            this.loadingData = false;\n\n            m.redraw();\n        });\n    }\n\n    content() {\n        const locales = getLocales(this.native);\n        const countryData = getCountries(this.native);\n\n        return [\n            <div className=\"container\">\n                <div className=\"FofDiscussionLanguagesSettingsPage\">\n                    <div className=\"Form-group\">\n                        {Switch.component(\n                            {\n                                state: this.native,\n                                onchange: (val) => {\n                                    this.native = val;\n                                    this.refresh();\n                                    m.redraw.sync();\n                                },\n                            },\n                            app.translator.trans('fof-discussion-language.admin.settings.native_label')\n                        )}\n                    </div>\n\n                    <div className=\"Form-group\">\n                        {Switch.component(\n                            {\n                                state: this.showFlags,\n                                onchange: (val) => (this.showFlags = val),\n                            },\n                            app.translator.trans('fof-discussion-language.admin.settings.show_flag_label')\n                        )}\n                    </div>\n\n                    <div className=\"Form-group\">\n                        {Switch.component(\n                            {\n                                state: this.composerLocaleDefault,\n                                onchange: (val) => (this.composerLocaleDefault = val),\n                            },\n                            app.translator.trans('fof-discussion-language.admin.settings.composer_default_label')\n                        )}\n                    </div>\n\n                    <div className=\"Form-group\">\n                        {Switch.component(\n                            {\n                                state: this.localeSort,\n                                onchange: (value) => (this.localeSort = value),\n                            },\n                            app.translator.trans('fof-discussion-language.admin.settings.locale_sort_label')\n                        )}\n                    </div>\n\n                    <div className=\"Form-group\">\n                        {Switch.component(\n                            {\n                                state: this.showAnyLangOpt,\n                                onchange: (value) => (this.showAnyLangOpt = value),\n                            },\n                            app.translator.trans('fof-discussion-language.admin.settings.show_any_lang_opt_label')\n                        )}\n                    </div>\n\n                    <hr />\n\n                    {this.loadingData ? (\n                        <LoadingIndicator />\n                    ) : (\n                        <form>\n                            <div className=\"Form-group flex\">\n                                {Select.component({\n                                    onchange: this.newLocale,\n                                    value: this.newLocale(),\n                                    options: locales,\n                                })}\n\n                                {Select.component({\n                                    onchange: this.newCountry,\n                                    value: this.newCountry(),\n                                    options: countryData,\n                                })}\n\n                                {flag(countries.getEmoji(this.newCountry()))}\n\n                                {Button.component(\n                                    {\n                                        className: 'Button Button--primary',\n                                        onclick: this.add.bind(this),\n                                        disabled: !this.newLocale() || !this.newCountry() || this.adding,\n                                    },\n                                    icon(this.adding ? 'fas fa-spinner fa-spin' : 'fas fa-plus')\n                                )}\n                            </div>\n\n                            <div className=\"Form-group\">\n                                {app.store.all('discussion-languages').map((language) => {\n                                    const id = language.id();\n                                    const updating = this.updating[id];\n                                    const deleting = this.deleting[id];\n\n                                    const country = this.countries[id] || language.country();\n\n                                    return (\n                                        <div className=\"flex\">\n                                            {Select.component({\n                                                onchange: (val) => (this.codes[id] = val),\n                                                value: this.codes[id] || language.code(),\n                                                options: locales,\n                                                disabled: updating || deleting,\n                                            })}\n\n                                            {Select.component({\n                                                onchange: (val) => (this.countries[id] = val),\n                                                value: country,\n                                                options: countryData,\n                                                disabled: updating || deleting,\n                                            })}\n\n                                            {flag(countries.getEmoji(country))}\n\n                                            {Button.component(\n                                                {\n                                                    className: `Button Button--danger`,\n                                                    disabled: deleting,\n                                                    onclick: this.remove.bind(this, language),\n                                                },\n                                                icon(deleting ? 'fas fa-spinner fa-spin' : 'fas fa-times')\n                                            )}\n                                        </div>\n                                    );\n                                })}\n                            </div>\n\n                            <div className=\"Form-group\">\n                                <Button\n                                    type=\"submit\"\n                                    className=\"Button Button--primary\"\n                                    loading={this.loading}\n                                    disabled={!this.isChanged()}\n                                    onclick={this.save.bind(this)}\n                                >\n                                    {app.translator.trans('core.admin.settings.submit_button')}\n                                </Button>\n                            </div>\n                        </form>\n                    )}\n                </div>\n            </div>,\n        ];\n    }\n\n    onkeydown(e) {\n        if (e.key === 'Enter') {\n            this.add();\n            e.preventDefault();\n        }\n    }\n\n    add() {\n        if (this.adding || !this.newLocale()) return;\n\n        this.adding = true;\n\n        const code = this.newLocale();\n        const country = this.newCountry();\n        const language = app.store.createRecord('discussion-languages');\n\n        language\n            .save({ code, country })\n            .then(() => {\n                this.newLocale('');\n\n                this.adding = false;\n\n                m.redraw();\n            })\n            .catch(() => (this.adding = false));\n    }\n\n    save(e) {\n        e.preventDefault();\n\n        this.loading = true;\n\n        Promise.all([\n            ...this.dirty().map((language) => {\n                const id = language.id();\n\n                this.updating[id] = true;\n\n                return language\n                    .save({ code: this.codes[id], country: this.countries[id] })\n                    .then(\n                        () => {},\n                        () => {}\n                    )\n                    .then(() => {\n                        this.updating[id] = false;\n                    });\n            }),\n            saveSettings({\n                [this.nativeKey]: this.native,\n                [this.showFlagsKey]: this.showFlags,\n                [this.composerLocaleDefaultKey]: this.composerLocaleDefault,\n                [this.localeSortKey]: this.localeSort,\n                [this.showAnyLangOptKey]: this.showAnyLangOpt,\n            }).then(this.onsaved.bind(this)),\n        ]);\n    }\n\n    remove(language) {\n        this.deleting[language.id()] = true;\n\n        language\n            .delete()\n            .then(\n                () => {},\n                () => {}\n            )\n            .then(() => {\n                delete this.deleting[language.id()];\n                m.redraw();\n            });\n    }\n\n    dirty() {\n        return app.store.all('discussion-languages').filter((l) => {\n            const id = l.id();\n\n            return (this.codes[id] && this.codes[id] !== l.code()) || (this.countries[id] && this.countries[id] !== l.country());\n        });\n    }\n\n    isChanged() {\n        const dirty = this.dirty().length;\n        const native = Number(this.native) !== Number(app.data.settings[this.nativeKey] || 0);\n        const flag = Number(this.showFlags) !== Number(app.data.settings[this.showFlagsKey] || 0);\n        const composerLocale = Number(this.composerLocaleDefault) !== Number(app.data.settings[this.composerLocaleDefaultKey] || 0);\n        const locale = Number(this.localeSort) !== Number(app.data.settings[this.localeSortKey] || 0);\n        const anyOpt = Number(this.showAnyLangOpt) !== Number(app.data.settings[this.showAnyLangOptKey] || 0);\n\n        return dirty || native || flag || composerLocale || locale || anyOpt;\n    }\n}\n","import LanguagesSettingsPage from './LanguagesSettingsPage';\n\nexport const components = {\n    LanguagesSettingsPage,\n};\n","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","import getCountry, * as countries from './countries';\nimport locales, { getName } from './locales';\nimport { utils as commonUtils } from '../../common/utils';\n\nexport const utils = {\n    getCountry,\n    countries,\n    locales,\n    getName,\n    ...commonUtils,\n};\n","import { extend } from 'flarum/common/extend';\nimport Forum from 'flarum/common/models/Forum';\nimport PermissionGrid from 'flarum/admin/components/PermissionGrid';\nimport SettingDropdown from 'flarum/admin/components/SettingDropdown';\n\nimport LanguagesSettingsPage from './components/LanguagesSettingsPage';\nimport Language from '../common/models/Language';\n\nexport * from './components';\nexport * from './utils';\nexport * from '../common/models';\n\napp.initializers.add('fof/discussion-language', () => {\n    app.store.models['discussion-languages'] = Language;\n\n    Forum.prototype.discussionLanguages = Forum.hasMany('discussionLanguages');\n\n    app.extensionData.for('fof-discussion-language').registerPage(LanguagesSettingsPage);\n\n    // This extend must remain for now, as the new admin UI in beta 15 does not currently support the custom dropdown\n    extend(PermissionGrid.prototype, 'startItems', (items) => {\n        items.add(\n            'allowLanguageChange',\n            {\n                icon: 'fas fa-globe',\n                label: app.translator.trans('fof-discussion-language.admin.permissions.allow_change_language_label'),\n                setting: () => {\n                    const minutes = parseInt(app.data.settings['fof-discussion-language.allow_tag_change'], 10);\n\n                    return SettingDropdown.component({\n                        defaultLabel: minutes\n                            ? app.translator.trans('core.admin.permissions_controls.allow_some_minutes_button', minutes, { count: minutes })\n                            : app.translator.trans('core.admin.permissions_controls.allow_indefinitely_button'),\n                        key: 'fof-discussion-language.allow_language_change',\n                        options: [\n                            { value: '-1', label: app.translator.trans('core.admin.permissions_controls.allow_indefinitely_button') },\n                            { value: '10', label: app.translator.trans('core.admin.permissions_controls.allow_ten_minutes_button') },\n                            { value: 'reply', label: app.translator.trans('core.admin.permissions_controls.allow_until_reply_button') },\n                        ],\n                    });\n                },\n            },\n            90\n        );\n    });\n});\n"],"sourceRoot":""}